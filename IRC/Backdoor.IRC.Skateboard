[script]
n0=; Servicios DNS
n1=alias ipa {
n2=  unset %ipaa
n3=  if ($count($2,$chr(46)) == 3) && ($right($2,1) isnum) { set %ipaa $2 | goto L1 }
n4=  if ($count($2,$chr(46)) >= 2) { set %ipaa $2 | goto L00 }
n5=  if $len($chat($$2).ip) > 0 { set %ipaa $chat($$2).ip | goto L1 }
n6=  if $len($gettok($address($$2,2),2,64)) > 1 { set %ipaa $gettok($address($$2,2),2,64) | goto L00 }
n7=  if $len($gettok($query($$2).address,2,64)) > 0 { set %ipaa $gettok($query($$2).address,2,64) | goto L00 }
n8=  :L0
n9=  if $ipef2($$2) == falsa { echo -se 2IP enmascarada por el server (4 $$2 2) | halt }
n10=  set %ipa $$1 | .enable #IPDNS | dns $$2 | .timerDN 1 120 .disable #IPDNS | halt
n11=  :L00
n12=  if ($count(%ipaa,$chr(46)) == 3) && ($right(%ipaa,1) isnum) goto L1
n13=  if ($$1 == SPEAK) || ($$1 == SPEAK2) || ($$1 == NTB) || ($$1 == CHAT) || ($$1 == IPC) goto L0
n14=  :L1
n15=  if $ipef2(%ipaa) == falsa { echo -se 2IP enmascarada por el server (4 %ipaa 2) | unset %ipaa | halt }
n16=  if ($$1 == PING) { iping %ipaa $$2 }
n17=  if ($$1 == TCPING) { itcping %ipaa $$2 }
n18=  if ($$1 == TRUTA) { truta %ipaa $$2 }
n19=  if ($$1 == OOB) { oob %ipaa $$2 }
n20=  if ($$1 == ASSAULT) { assault %ipaa $$2 }
n21=  if ($$1 == FRIGO) { frigonuke %ipaa $$2 }
n22=  if ($$1 == PTC) { PTclave %ipaa $$2 }
n23=  if ($$1 == PTS) { PTscan %ipaa %ipuerto $$2 }
n24=  if ($$1 == PTR) { PTrango %ipaa %ipuerto %fpuerto }
n25=  if ($$1 == IDEN) { iden %ipaa }
n26=  if ($$1 == TELNET) { telnet %ipaa %ipuerto }
n27=  if ($$1 == WGSCAN) { wgsc %ipaa $$2 }
n28=  if ($$1 == PTFUQ) { ptfuk %ipaa }
n29=  if ($$1 == SPEAK) { speakf %ipaa %ipaa }
n30=  if ($$1 == SPEAK2) { netmetin %ipaa %ipaa }
n31=  if ($$1 == NTB) { vntb %ipaa %ipaa }
n32=  if ($$1 == CHAT) { dnschat %ipaa }
n33=  if ($$1 == IPC) { %ipc.ip = %ipaa | ipctrsaca | ipctrinfo listo }
n34=  unset %ipaa %ipuerto
n35=}
n36=
n37=#IPDNS off
n38=on 1:DNS: {
n39=  .disable #IPDNS | .timerDN off
n40=  if ($iaddress == $null) { echo -se 2 IP4 no resuelta | if %ipa == IPC ipctrinfo IP no resuelta | goto L1 }
n41=  if ( %ipa == PING ) { iping $iaddress $nick }
n42=  if ( %ipa == TCPING ) { itcping $iaddress $nick }
n43=  if ( %ipa == TRUTA ) { truta $iaddress $nick }
n44=  if ( %ipa == OOB ) { oob $iaddress $nick }
n45=  if ( %ipa == ASSAULT ) { assault $iaddress $nick }
n46=  if ( %ipa == FRIGO ) { frigonuke $iaddress $nick }
n47=  if ( %ipa == PTC ) { PTclave $iaddress $nick }
n48=  if ( %ipa == PTS ) { PTscan $iaddress %ipuerto $nick }
n49=  if ( %ipa == PTR ) { PTrango $iaddress %ipuerto %fpuerto }
n50=  if ( %ipa == IDEN ) { iden $iaddress }
n51=  if ( %ipa == TELNET ) { telnet $iaddress %ipuerto }
n52=  if ( %ipa == WGSCAN ) { wgsc $iaddress $nick }
n53=  if ( %ipa == PTFUQ ) { ptfuk $iaddress }
n54=  if ( %ipa == SPEAK ) { speakf $iaddress $nick }
n55=  if ( %ipa == SPEAK2 ) { netmetin $iaddress $nick }
n56=  if ( %ipa == NTB ) { vntb $iaddress $nick }
n57=  if ( %ipa == CHAT ) { dnschat $iaddress }
n58=  if (%ipa == IPC) { %ipc.ip = $iaddress | ipctrsaca | if $naddress != $null ipctrinfo $naddress | else ipctrinfo listo | if $ipef2($iaddress) == falsa ipctrinfo IP oculta por el servidor }
n59=  :L1
n60=  unset %ipaa %ipa %ipuerto %fpuerto
n61=  halt
n62=}
n63=#IPDNS end
n64=
n65=alias pidepuerto set %puerco $$?="Puerto ?"
n66=
n67=alias iping run ping -w 5000 -n 6 $$1 | lsombra 0 2 Comprobando IP (icmp)8 $$1 7( $2- ) | echo -se %texto
n68=
n69=alias truta run $mircdirvarios\irsys\ruta $$1 | lsombra 0 2 Trazando ruta IP8 $$1 7( $2- ) | echo -se %texto
n70=
n71=alias speakf {
n72=  if .exe !isin %speakfre { echo -se  Speak Freely no encontrado... | halt }
n73=  writeini $nofile(%speakfre) $+ ircap.spk HOST name $$2
n74=  writeini $nofile(%speakfre) $+ ircap.spk HOST network_address $$1
n75=  run %speakfre $nofile(%speakfre) $+ ircap.spk
n76=  lsombra 0 6 Speak Freely | echo -se %texto 2llamando a6 $$2 2( $$1 )
n77=}
n78=alias NETMETIN {
n79=  run callto: $+ $$1
n80=  lsombra 0 6 Net Meeting | echo -se %texto 2llamando a6 $$2 2( $$1 )
n81=}
n82=
n83=alias dccIP {
n84=  if $right($$1,1) isnum { 
n85=    if %dnsend == on { unset %dnsend | DCC send $$1 | echo -se DCC send con $$1 | halt }
n86=    dcc chat $$1 | echo -se DCC chat con $$1 | halt
n87=  }
n88=  ipa CHAT $$1
n89=}
n90=
n91=alias DNSCHAT {
n92=  if $1 == $null { echo -se  IP no encontrada. DCC chat cancelado. | halt }
n93=  if %dnsend == on { unset %dnsend | echo -se DCC send con $$1 | .timer -m 1 100 dcc send $$1 | halt }
n94=  echo -se DCC chat con $$1 | DCC chat $$1
n95=}
n96=
n97=#buscahost off
n98=on 1:DNS: {
n99=  .disable #buscahost | .timerBUNUKE off
n100=  if ($iaddress != $null) who $iaddress
n101=  if ($naddress != $null) { echo -s 14 Host resuelto en1 $naddress 12. Localizando nick ... | who $naddress }
n102=  else echo -s 14 Host no resuelto 1( localizando IP:12 $iaddress 1)
n103=  halt
n104=}
n105=#buscahost end
n106=
n107=on 1:DNS: {
n108=  lsombra 0 1 $nick 1_8IP1_ | echo 6 -s %texto 1 $iaddress
n109=  lsombra 0 1 $nick 9Host | echo 6 -s %texto 1 $naddress
n110=  if %clipip == 1 { unset %clipip | clipboard $iaddress | echo 1 -se  Clip4 $cb | bip }
n111=  raya | halt
n112=}
n113=
n114=alias dameip {
n115=  if $len($gettok($address($$1,2),2,64)) > 1 { return $gettok($address($$1,2),2,64) }
n116=  if $len($chat($$1).ip) > 0 { return $chat($$1).ip }
n117=  if $len($gettok($query($$1).address,2,64)) > 0 { return $gettok($query($$1).address,2,64) }
n118=  echo 12 -se  IP no disponible, necesitas recibir algo de5 $$1 | fallo
n119=}
n120=
n121=
n122=on ^+20:OPEN:?: if $1- == æD { halt }
n123=on ^+20:TEXT:*:?: if $1- == æD { halt }
n124=#colornick on
n125=on ^1:TEXT:*:?: echo $nick %colnick1 $+ $nick $+ %colnick2 $+  $dime($nick,$1-) | beeping $nick | halt
n126=on ^1:TEXT:*:#: echo $chan %colnick1 $+ $nick $+ %colnick2 $+  $dime($chan,$1-) | beeping $chan | halt
n127=on ^1:CHAT:*: {
n128=  if $gettok($1-,1,32) == ACTION { echo 6 =$nick * $nick $remove($gettok($1-,2-99,32),) | halt }
n129=  echo =$nick %colnick1 $+ $nick $+ %colnick2 $+  $dime($nick,$1-) | beeping $nick | halt
n130=}
n131=#colornick end
n132=
n133=ctcp !1:*: if ($1 != sound) && ($1 != MP3) && ($1 != dcc) { sss ctcp }
n134=
n135=alias BEEPING {
n136=  if ($readini mirc.ini beeping $$1 == on) { .timerBEP -m 1 300 beep 1 1 }
n137=}
n138=
n139=;Notificador Mail ( sockets )
n140=
n141=alias tengomail {
n142=  echo -s 4 $timestamp 2Comprobando cuentas 4e-mail
n143=  window -c @MAIL
n144=  sockclose MAIL*
n145=  if ( $len(%email1) > 5 ) sockopen MAIL1 $gettok(%email1,1,32) 110
n146=  if ( $len(%email2) > 5 ) sockopen MAIL2 $gettok(%email2,1,32) 110
n147=  if ( $len(%email3) > 5 ) sockopen MAIL3 $gettok(%email3,1,32) 110
n148=}
n149=
n150=on 1:sockopen:MAIL*: {
n151=  if $sockerr > 0 { echo -s 4 $timestamp 1 $gettok(%email [ $+ [ $remove($sockname,MAIL) ] ] ,1,32) 4no responde | sockclose $sockname | mailraya | return }
n152=  if ( $sockname == MAIL1 )  { sockwrite -tn $sockname user $gettok($gettok(%email1,2,32),1,64) | sockwrite -tn $sockname pass $gettok(%email1,3,32) }
n153=  if ( $sockname == MAIL2 )  { sockwrite -tn $sockname user $gettok($gettok(%email2,2,32),1,64) | sockwrite -tn $sockname pass $gettok(%email2,3,32) }
n154=  if ( $sockname == MAIL3 )  { sockwrite -tn $sockname user $gettok($gettok(%email3,2,32),1,64) | sockwrite -tn $sockname pass $gettok(%email3,3,32) }
n155=  sockwrite -tn $sockname stat
n156=}
n157=
n158=on 1:sockread:MAIL*: {
n159=  sockread %smail
n160=  set %cuenta $gettok(%email1,2,32) | if ( $sockname == MAIL2 ) { set %cuenta $gettok(%email2,2,32) } | if ( $sockname == MAIL3 ) { set %cuenta $gettok(%email3,2,32) }
n161=  if -ERR isin %smail { echo -s 4 $timestamp  %cuenta 1error 2( %smail ) | mailraya | sockwrite -tn $sockname quit | sockclose $sockname | unset %smail %cuenta | halt }
n162=
n163=  if ($gettok(%smail,1,32) == +OK) && ($gettok(%smail,2,32) isnum ) && ($gettok(%smail,3,32) isnum ) && ($gettok(%smail,4,32) == $null ) {
n164=    if $gettok(%smail,2,32) == 0 { echo -s 4 $timestamp 12 %cuenta 1No hay mensajes. | mailraya | goto L1 }
n165=    focusi | cbar | window -k +d @MAIL $calc($window(-1).w - 300) $result 300 $calc($window(@mail).h + 16) @chmail Arial 11 | focus
n166=    echo @MAIL 4 $timestamp 12 %cuenta $+ 1 $gettok(%smail,2,32) 2( $+ $gettok(%smail,3,32) bytes)
n167=    echo -s 4 $timestamp 12 %cuenta $+ 1 $gettok(%smail,2,32) mensajes2 ( $+ $gettok(%smail,3,32) bytes) | mailraya
n168=    :L1
n169=    unset %smail %cuenta | sockwrite -tn $sockname quit | sockclose $sockname
n170=  }
n171=}
n172=
n173=alias mailraya .timerMAILRAYA -o 1 15 raya
n174=
n175=alias memiromimail {
n176=  if %nmailcomp != 0 { %nmin = %nmailcomp * 60 | .timerMAIL 0 %nmin tengomail | unset %nmin | .timer 1 30 tengomail }
n177=  if %nmailcomp == 0 { .timerMAIL off }
n178=}
n179=
n180=#conversoreu on
n181=on 1:input:*: {
n182=  if ($left($active,1) == $chr(35)) || ($query($active) == $active) || ($left($active,1) == $chr(61)) {
n183=    if ($left($1,1) != / ) && ($halted == $false) { 
n184=      var %vab = $matchtok($1-,&,1,32)
n185=      if %vab != $null {
n186=        var %vabp = $findtok($1-,%vab,1,32)
n187=        var %vabr = $uniconv(%vab)
n188=        if (%vabr != $null) { say $reptok($1-,%vab,%vabr,1,32) | halt }
n189=      }
n190=    }
n191=  }
n192=}
n193=#conversoreu end
